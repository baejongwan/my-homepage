# -*- coding: utf-8 -*-
"""
자동 잔고 감지 기능 업데이트
========================

✅ 변경사항:
1. 바이낸스 USDT 잔고 자동 조회
2. 수수료 여유분 자동 제외 (기본 $5)
3. 수동 설정과 자동 감지 모드 선택 가능

📋 설정 방법:

config.py:
    AUTO_BALANCE_MODE = True    # 자동 감지 ON
    BALANCE_FEE_BUFFER = 5.0     # 수수료 여유 USDT
    MIN_BALANCE_USDT = 50        # 최소 잔고

💡 동작 방식:

1. 거래 시작 시:
   - 바이낸스 선물 계정 잔고 조회
   - USDT 총액 확인 (free + used)
   
2. 투자금 계산:
   - 잔고 - 수수료 여유분 = 투자 가능금액
   - 예: $156.04 - $5 = $151.04
   - 100% 설정 시: 전액 $151 투자
   
3. 안전 장치:
   - 잔고 < $50: 거래 중단
   - 투자금 < $10: 주문 취소
   - 조회 실패: 설정값 폴백

📊 예시 로그:

[잔고] USDT 총액: $156.04 | 사용가능: $150.04 | 미결제: $6.00
[자동 감지] 잔고: $156.04
[자동 감지] 수수료 여유: $5.00
[자동 감지] 투자 100%: $151.04
[진입] LONG @ $1862.50, 수량 0.0812 ETH ($151.04)

⚠️ 주의사항:
- 자동 감지 사용 중 잔고 변화에 따라 투자금 변동
- 물타기 시에도 현재 잔고 기준으로 계산
- 미결제 포지션 없을 때만 전액 사용 가능
"""
